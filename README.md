# economy-new
# 今やっていること
11日に経済指数を拡充して、12日にはゲームループ＆イベントに取り掛かる予定です。
サイドドロワーのデザイン案に迷ってるので、考えてくれてもいいよ？
# 🧠 コンサルタント経済シミュレーションゲーム（開発中）

本プロジェクトは、プレイヤーが「コンサルタント」として企業や金融機関を支援する、経済シミュレーション型ブラウザゲームです。  
現実の経済変動や経営課題をもとに、分析・提案・戦略構築のスキルを磨くことができます。

---

## 🎯 実装予定機能一覧

### 🎮 ゲーム基本システム
- プレイヤーはコンサルタントとなり、企業・銀行にアドバイスを提供
- 経営課題の依頼を受け、提案と実行によって評価される
- 評価に応じて報酬・評判が上がり、上位案件に挑戦可能

### 📊 経済シミュレーション要素
- 仮想経済（物価・金利・為替・政策）が動的に変化
- 市場環境に応じて戦略を最適化する必要がある
- 提案が企業の成長・衰退にリアルタイムで影響

### 📑 案件・クライアントシステム
- 業種・規模・依頼内容が異なる多様な案件を用意
- クライアントとの会話から課題を特定し、仮説構築
- 案件成功により「信頼度」や「経験値」が上昇

### 🛠️ 分析・提案フェーズ
- 分析ツール（財務 / マーケ / 組織 / AI など）を選択
- 提案内容を資料としてまとめ、成果に応じてスコア決定
- 成否によってクライアントの未来が分岐

### 🌐 UI/UX技術（使用予定）
- フロントエンド：React / Tailwind CSS / JavaScript
- 構成：SPA（シングルページアプリケーション）
- 対応環境：PC / スマートフォン（予定）

---

## 📌 開発状況

このリポジトリは開発中です。  
今後以下のようなアップデートを予定しています：

- [ ] トップ画面・企業選択画面の実装
- [ ] 案件データの設計と表示ロジック
- [ ] クライアント会話ロジックの追加
- [ ] 提案画面のUI構築
- [ ] 仮想経済データの動的変化処理

## 使い方
ブラウザで `public/index.html` を開き、画面をタップするとゲームがスタートします。
ゲーム画面では5〜7秒ごとにターンが進み、上部のステータスがリアルタイムに更新されます。
右上の「☰」ボタンでメニューを開閉でき、まれに発生するイベントは画面右上にトースト表示されます。

### React 版について
スタート画面 (`index.html`) では React を利用した `start_screen_react.js` が読み込まれます。
今回、ゲーム画面も React で試せるよう `game_screen_react.html` と `game_screen_react.js` を追加しました。
React 版スタート画面からはこちらのファイルに遷移します。
従来のプレーンな実装 (`game_screen.html`) も残してあるので、用途に応じて使い分けてください。

### 経済指数ダッシュボード
`game_screen_react.html` では CPI・失業率・政策金利・GDP 成長率をヘッダーに常時表示します。
その他の指標は右上の「☰」ボタンから開くサイドドロワーに一覧表示されます。
サイドドロワーは画面右側から縦長に展開され、右下の「戻る」ボタンで閉じることができます。
CPI のグラフ表示は廃止しました。スマホでも見やすいシンプルなデザインなので、気軽に指標の変化をチェックできます。

指標カードを開くと、過去の推移を示す小さな折れ線グラフ（スパークライン）が表示されます。
履歴は `MAX_HISTORY`(30) 件まで保存され、新しいデータが追加されると古い値から順に削除されます。
各カードではスパークラインを左側に配置し、右側にその指数の意味を解説する「使い方メモ」を表示します。
スパークラインはカード幅の約1/3に収まるよう縮小され、横:縦=3:1 の比率で描画されるため、表示がはみ出す心配はありません。
初心者でも数値の内容を理解しやすくなっています。

#### 経済シミュレーションの更新処理

`public/game_screen_react.js` には `updateEconomy(prevStats, factors)` 関数を実装しました。
需要・供給・政策金利といった要因値 (`factors`) をもとに、CPI や失業率、為替レートなどを計算します。
ゲームループではこれらの要因値を `useState` で管理し、毎ターン少しずつ変化させつつ `updateEconomy()` を呼び出しています。
その結果が `MAX_HISTORY` 分だけ履歴に追加され、画面上の数値とスパークラインに反映されます。

変更後のスクリプトを利用する場合は次の手順でテストしてください。

```bash
npm install
npm test
```

### 新しいスパークラインカード例

`public/economic_card.html` をブラウザで開くと、Chart.js と React を組み合わせた簡易的な
指標カードのサンプルを確認できます。`EconomicCard.jsx` は `SparkChart.jsx` を利用して
折れ線グラフを表示するコンポーネントです。ラベルや数値を自由に差し替えられるので、
自分のデータで試してみてください。


## 🧪 テスト実行方法

テストには **Node.js と npm** が必要です。リポジトリをクローンした直後は依存パッケージがないので、必ず最初に `npm install` を実行してから `npm test` を行ってください。

```bash
npm install  # 依存パッケージのインストール
npm test     # Jest でテストを実行
```

---

## 🙋‍♂️ Contributors

- **企画・構成・監修**：江橋　山毛
- **コーディング・実装**：山毛
- **アドバイザー・ChatGPT**：江橋　codex OpenAI GPT-4o Claude Gemini じる
 
---

## 📜 License
This project is licensed under the MIT License - see the [LICENSE](./LICENSE) file for details.


